---
title: Facebookåƒç´ ç¼–ç çš„ä½¿ç”¨æ€»ç»“
tags: 
    - Facebookåƒç´ ç¼–ç 
    - JS
categories: JS
date: 2019-08-23 09:54
copyright: true
---



### 1. å‰è¨€

ä¹‹å‰åœ¨åšã€è·¨å¢ƒç”µå•†ã€‘é¡¹ç›®æ—¶ï¼Œç”±äºéœ€è¦ä½¿ç”¨Facebookè¿›è¡Œå¹¿å‘Šçš„æŠ•æ”¾ï¼Œæ‰€ä»¥æ¥è§¦åˆ°äº†**Facebookåƒç´ ç¼–ç **ã€‚ä»–çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å¯¹ç”µå•†å„ä¸ªé¡µé¢çš„å„ç§æ“ä½œè¿›è¡Œç»Ÿè®¡ï¼Œå¦‚ï¼šæµè§ˆå•†å“ã€åŠ å…¥è´­ç‰©è½¦ã€è´­ä¹°ç­‰åŠ¨ä½œã€‚æ¯ä¸ªå•†æˆ·éƒ½æœ‰ä¸€ä¸ªåå°ç›‘æ§ç³»ç»Ÿï¼Œå¯ä»¥å®æ—¶çœ‹åˆ°æ¯ä¸ªåƒç´ ç¼–ç çš„çš„å„ä¸ªâ€œåŠ¨ä½œâ€çš„ç»Ÿè®¡é‡ã€‚



ä¸šåŠ¡ä¸Šçš„å¤§ä½“è®²è¿™ä¹ˆå¤šï¼Œæ¥ä¸‹æ¥æˆ‘å°†å±•ç¤ºå‡ ä¸ªä¸»è¦çš„â€œ**åŠ¨ä½œ**â€çš„å…·ä½“ä»£ç ã€‚ğŸ™ƒğŸ™ƒğŸ™ƒ



### 2. å…·ä½“ä»£ç 

åœ¨ä»£ç ä¸Šçš„ï¼Œå…¶å®å°±æ˜¯å‡ æ®µ`javaScript`ä»£ç ï¼Œä¸‹é¢æ˜¯å‡ ä¸ªä»£ç ç‰‡æ®µã€‚

æˆ‘å°†ä»¥ä¸€ä¸ªå®Œæ•´çš„è´­ç‰©æµç¨‹è¿›è¡Œè¯´æ˜ï¼š

è®¿é—®ç”µå•† â¡ï¸ æŸ¥çœ‹æŸä¸ªäº§å“ â¡ï¸ å°†è¯¥äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦ â¡ï¸ å®Œå–„åœ°å€ç­‰è´­ç‰©ä¿¡æ¯ â¡ï¸ å‘èµ·ç»“è´¦ â¡ï¸ å®Œæˆç»“è´¦



#### 1. åˆå§‹åŒ–åƒç´ ç¼–ç 

- è¯´æ˜ï¼š

  åœ¨å¼€å§‹è¿›è¡Œä¸€ç³»åˆ—åŠ¨ä½œä¹‹å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–Facebookåƒç´ ï¼Œå³å¼•å…¥ç›¸å…³`javaScript`ä»£ç ï¼Œhttps://connect.facebook.net/en_US/fbevents.jsï¼ˆè¯¥æ–‡ä»¶éœ€è¦å¼€å¯ç§‘å­¦ä¸Šç½‘æ‰èƒ½è®¿é—®åˆ°ï¼‰ã€‚

  åœ¨å¼•å…¥ç›¸å…³å¿…é¡»çš„`JS`ä»£ç ä¹‹åï¼Œéœ€è¦æ‰§è¡Œä¸€ä¸ª`fbq('init', facebookID)`æ–¹æ³•ï¼Œå³**åˆå§‹åŒ–è¯¥åƒç´ ç¼–ç **ã€‚è¿™ä¸ªfacebookIDå¯ä»¥é€šè¿‡å¼‚æ­¥æ“ä½œä»åå°è·å–ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå›ºå®šçš„åƒç´ ç¼–ç ã€‚

  

  å»ºè®®å°†åˆå§‹åŒ–çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªå…¬å…±æ–¹æ³•ä¸­ã€‚

  

  æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯ä»¥ä¸€æ¬¡æ€§åˆå§‹åŒ–**å¤šä¸ª**åƒç´ ç¼–ç ã€‚ä¸¾ä¸ªä¾‹å­ï¼š

  ```js
  let facebookIdList = ['1111111111', '2222222222'];
  facebookIdList.forEach(facebookID => {
    fbq('init', facebookID)
  })
  ```

- ä»£ç ï¼š

  ```js
  function initFacebook(facebookID) {
    !function (f, b, e, v, n, t, s) {
      if (f.fbq) return; n = f.fbq = function () {n.callMethod ?
  		n.callMethod.apply(n, arguments) : n.queue.push(arguments)
  		};if (!f._fbq) f._fbq = n;n.push = n;n.loaded = !0;n.version = '2.0';
  		n.queue = [];t = b.createElement(e);t.async = !0;t.src = v;
  		s = b.getElementsByTagName(e)[0]; 
  		s.parentNode.insertBefore(t, s)
    }(window, document, 'script','https://connect.facebook.net/en_US/fbevents.js');
  
    fbq('init', facebookID); // å…¶ä¸­çš„facebookIDå¯ä»¥å¼‚æ­¥è·å–ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå›ºå®šçš„åƒç´ ç¼–ç 
  }
  ```



#### 2. è®¿é—®é¡µé¢

- è¯´æ˜ï¼š

  æ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ã€‚è¯¥æ–¹æ³•æ— éœ€å‚æ•°ã€‚

- ä»£ç ï¼š

  ```js
  fbq('track', 'PageView');
  ```

  

#### 3. æŸ¥çœ‹å•†å“

- è¯´æ˜ï¼š

  ç‚¹å‡»æŸ¥çœ‹æŸä¸ªäº§å“çš„è¯¦æƒ…ã€‚

- å‚æ•°ï¼š

  - äº§å“id
  - äº§å“ç¼–å·

- ä»£ç ï¼š

  ```js
  fbq('track', 'ViewContent', {
      content_ids: 'affProductId',//äº§å“id
      content_type: 'productSn'//äº§å“ç¼–å·
  });
  ```



#### 4. åŠ å…¥è´­ç‰©è½¦

- è¯´æ˜ï¼š

  å°†äº§å“**åŠ å…¥è´­ç‰©è½¦**æ—¶æ‰§è¡Œã€‚

- å‚æ•°ï¼š

  - äº§å“id
  - äº§å“ç¼–å·

- ä»£ç ï¼š

  ```js
  fbq('track', 'AddToCart', {
      content_ids: 'affProductId',//äº§å“id
      content_type: 'productSn'//äº§å“ç¼–å·
  });
  ```



#### 5. æ·»åŠ æ”¯ä»˜ä¿¡æ¯

- è¯´æ˜ï¼š

  åœ¨ç”¨æˆ·å°†è¦ä¸‹å•å‰ï¼Œéœ€è¦æ·»åŠ æ”¶è´§åœ°å€æˆ–è€…å®Œå–„å…¶ä»–è´­ç‰©ä¿¡æ¯æ—¶æ‰§è¡Œã€‚è¯¥æ–¹æ³•æ— éœ€ä¼ å‚ã€‚

- ä»£ç ï¼š

  ```js
  fbq('track', 'AddPaymentInfo');
  ```



#### 6. å‘èµ·ç»“è´¦

- è¯´æ˜ï¼š

  ä»è´­ç‰©è½¦æˆ–è€…äº§å“è¯¦æƒ…é¡µå‘èµ·ç»“è´¦æ—¶æ‰§è¡Œã€‚

- å‚æ•°ï¼š

  - äº§å“ä»·æ ¼
  - äº§å“è´§å¸ç§ç±»

- ä»£ç ï¼š

  ```js
  fbq('track', 'InitiateCheckout', {
      value: totalprice,//äº§å“ä»·æ ¼
      currency: 'TWD'//äº§å“è´§å¸ç§ç±»
  });
  ```



#### 7. å®Œæˆç»“è´¦ï¼Œç”Ÿæˆè®¢å•

- è¯´æ˜ï¼š

  é€šè¿‡**çº¿ä¸Šä»˜æ¬¾**æˆ–è€…**è´§åˆ°ä»˜æ¬¾å®Œæˆ**ç»“è´¦åŠ¨ä½œ**å¹¶ä¸”ç”Ÿæˆè®¢å•å**æ‰§è¡Œã€‚

- å‚æ•°ï¼š

  - äº§å“ä»·æ ¼
  - äº§å“è´§å¸ç§ç±»
  - äº§å“id
  - äº§å“ç¼–å·

- ä»£ç ï¼š

  ```js
  fbq('track', 'Purchase', {
      value: '1200',
      currency: 'TWD',
      content_ids: 'affProductId',
      content_type: 'productSn'
  });
  ```



### 3. å¦‚ä½•æµ‹è¯•

ä¸Šé¢æˆ‘ä»¬åˆ—ä¸¾äº†å¤§éƒ¨åˆ†ç»Ÿè®¡æ–¹æ³•ï¼Œç›¸ä¿¡å¤§å®¶å¾ˆå®¹æ˜“å°±èƒ½æŒæ¡å¹¶æ·»åŠ åˆ°è‡ªå·±çš„ä»£ç ä¸­ã€‚ä½†æ˜¯æˆ‘ä»¬æ·»åŠ åï¼Œæ€ä¹ˆè¿›è¡Œæµ‹è¯•å‘¢ï¼Ÿ

å¤§å®¶å¯ä»¥å®‰è£…ä¸€æ¬¾`Chrome`æ’ä»¶??`Facebook Pixel Helper`ï¼Œå¯ä»¥åœ¨è¯¥æ’ä»¶ä¸Šçœ‹åˆ°å„ä¸ªæ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ã€‚è¯¥æ’ä»¶ä¹Ÿéœ€è¦ç§‘å­¦ä¸Šç½‘æ‰èƒ½èµ·ä½œç”¨ã€‚

![mBaYGj.png](https://s2.ax1x.com/2019/08/23/mBaYGj.png)



### 4. åœ¨`React`é¡¹ç›®ä¸­çš„åˆå§‹åŒ–

åœ¨`React`é¡¹ç›®ä¸­ï¼Œåˆå§‹åŒ–æ—¶é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œä¸‹é¢æ˜¯åœ¨`React`é¡¹ç›®ä¸­åˆå§‹åŒ–çš„æ–¹æ³•ï¼š

```js
let fbq = '';
//åˆå§‹åŒ–facebookåƒç´ 
export function initFacebook() {
  (function (f, b, e, v, n, t, s){
    if (f.fbq) return; 
    n = f.fbq = function () {
      n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments)
    };
    
    if (!f._fbq) 
    f._fbq = n;
    n.push = n;
    n.loaded = !0;
    n.version = '2.0';
    n.queue = [];
    t = b.createElement(e);
    t.async = !0;t.src = v;
    s = b.getElementsByTagName(e)[0]; 
    s.parentNode.insertBefore(t, s)
    fbq = n
  })(window, document, 'script','https://connect.facebook.net/en_US/fbevents.js');

  fbq('init', facebookId); // åˆå§‹åŒ–åƒç´ ç¼–ç 
}
```

